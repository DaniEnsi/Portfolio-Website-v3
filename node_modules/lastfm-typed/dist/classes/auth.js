"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const base_1 = __importDefault(require("../base"));
const caster_1 = require("../caster");
class AuthClass extends base_1.default {
    async getToken(firstInput) {
        const token = await this.sendRequest({ method: "auth.getToken" });
        if (typeof token.token === "undefined") {
            throw Error("Something went wrong while getting the token. Probably because of Last.FM");
        }
        return token.token;
    }
    async getSession(firstInput) {
        firstInput = (0, caster_1.convertString)(firstInput, "token", {});
        const res = (await this.sendRequest({ method: "auth.getSession", ...firstInput })).session;
        res.subscriber = (0, caster_1.toBool)(res.subscriber);
        return res;
    }
    async getMobileSession(firstInput, password, token) {
        firstInput = (0, caster_1.convertString)(firstInput, "username", { password, token });
        return (await this.sendRequest({ method: "auth.getMobileSession", ...firstInput })).session;
    }
}
exports.default = AuthClass;
//# sourceMappingURL=auth.js.map